

<!DOCTYPE html>
<html class="writer-html5" lang="fr" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta property="article:modified_time" content="2025-12-02T11:02:27+01:00" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tests logiciels &mdash; Documentation Documentation du Mk2PVRouter </title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=9edc463e" />
      <link rel="stylesheet" type="text/css" href="../../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=9c3e77be" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx_lesson.css?v=0c089442" />
      <link rel="stylesheet" type="text/css" href="../../_static/term_role_formatting.css?v=4194e21c" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx_rtd_theme_ext_color_contrast.css?v=8e8ea19f" />
      <link rel="stylesheet" type="text/css" href="../../_static/drawio.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=4ae1632d" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=0d32a3b3"></script>
      <script src="../../_static/doctools.js?v=fd6eb6e6"></script>
      <script src="../../_static/sphinx_highlight.js?v=6ffebe34"></script>
      <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../_static/copybutton.js?v=f281be69"></script>
      <script src="../../_static/minipres.js?v=a0d29692"></script>
      <script>let toggleHintShow = '';</script>
      <script>let toggleHintHide = '';</script>
      <script>let toggleOpenOnPrint = 'true';</script>
      <script src="../../_static/togglebutton.js?v=1ae7504c"></script>
      <script src="../../_static/translations.js?v=e6b791cb"></script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
      <script src="../../_static/clickable-graphviz.js?v=b703d362"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Recherche" href="../../search/" />
    <link rel="next" title="Ã‰talonnage" href="../etalonnage-tri/" />
    <link rel="prev" title="Assemblage" href="../assemblage-tri/" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../" class="icon icon-home">
            Documentation du Mk2PVRouter
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search/" method="get">
    <input type="text" name="q" placeholder="Rechercher docs" aria-label="Rechercher docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">âš ï¸ SÃ©curitÃ© (Ã€ LIRE EN PREMIER!)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../safety-overview/">âš ï¸ SÃ©curitÃ© â€” Ã€ Lire Absolument Avant de Commencer</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ğŸ“– Introduction &amp; Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../introduction/">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../principe-fonctionnement/">Principe de fonctionnement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../burst-fire-control/">Burst Fire Control</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ğŸš€ DÃ©marrage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../soldering-tutorial/">Guide de Soudure pour DÃ©butants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation-logiciel/">Installation des Logiciels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation-logiciel/#installation-pilotes-ftdi">Installation Pilotes FTDI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation-logiciel/#choix-de-lenvironnement-de-developpement">Choix de lâ€™Environnement de DÃ©veloppement</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">1~ Kit monophasÃ©</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../mono/soudures-mono/">Soudures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mono/percages-mono/">PerÃ§ages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mono/carte-sortie-relais-mono/">Sortie relais tout-ou-rien</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mono/confection-cables-mono/">Confection des cÃ¢bles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mono/assemblage-mono/">Assemblage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mono/test-logiciel-mono/">Tests logiciels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mono/etalonnage-mono/">Ã‰talonnage</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">3~ Kit triphasÃ©</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../soudures-tri/">Soudures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../percages-tri/">PerÃ§ages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../carte-sortie-relais-tri/">Sortie relais tout-ou-rien</a></li>
<li class="toctree-l1"><a class="reference internal" href="../confection-cables-tri/">Confection des cÃ¢bles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../assemblage-tri/">Assemblage</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tests logiciels</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#pre-requis">PrÃ©-requis</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#carte-usb-vers-uart">Carte USB vers UART</a></li>
<li class="toctree-l3"><a class="reference internal" href="#logiciel-de-programmation">Logiciel de programmation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mise-en-place">Mise en place</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#installation-du-firmware">Installation du Firmware</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#etape-1-telechargement-du-firmware">Ã‰tape 1Â : TÃ©lÃ©chargement du Firmware</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#structure-du-firmware">Structure du Firmware</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#etape-2-configuration-du-firmware">Ã‰tape 2Â : Configuration du Firmware</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ouverture-du-projet">Ouverture du Projet</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuration-dans-config-h">Configuration dans <cite>config.h</cite></a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuration-dans-calibration-h">Configuration dans <cite>calibration.h</cite></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#etape-3-connexion-et-programmation">Ã‰tape 3Â : Connexion et Programmation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#preparation">PrÃ©paration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#connexion-du-routeur">Connexion du Routeur</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuration-arduino-ide">Configuration Arduino IDE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#compilation-et-televersement">Compilation et TÃ©lÃ©versement</a></li>
<li class="toctree-l4"><a class="reference internal" href="#resolution-des-problemes">RÃ©solution des ProblÃ¨mes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#etape-4-verification-du-fonctionnement">Ã‰tape 4Â : VÃ©rification du Fonctionnement</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ouverture-du-moniteur-serie">Ouverture du Moniteur SÃ©rie</a></li>
<li class="toctree-l4"><a class="reference internal" href="#messages-attendus">Messages Attendus</a></li>
<li class="toctree-l4"><a class="reference internal" href="#si-aucun-message-napparait">Si Aucun Message nâ€™ApparaÃ®t</a></li>
<li class="toctree-l4"><a class="reference internal" href="#adresses-des-sondes-de-temperature">Adresses des Sondes de TempÃ©rature</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#prochaines-etapes">Prochaines Ã‰tapes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#test-de-la-partie-mesures">Test de la partie <em>mesures</em></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../etalonnage-tri/">Ã‰talonnage</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">âš¡ Installation Finale</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installation-finale/">Installation Finale dans le SystÃ¨me Ã‰lectrique</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ğŸ”§ DÃ©pannage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshooting/">ğŸ”§ Guide de DÃ©pannage</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ğŸ“š Glossaire</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/">Glossaire</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/#termes-de-base-pour-debutants">Termes de Base pour DÃ©butants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/#termes-techniques-avances">Termes Techniques AvancÃ©s</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../">Documentation du Mk2PVRouter</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Tests logiciels</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/FredM67/Mk2PVRouter/blob/main/content/tri/test-logiciel-tri.rst" class="fa fa-github"> Ã‰diter sur GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="tests-logiciels">
<span id="test-logiciel-tri"></span><h1>Tests logiciels<a class="headerlink" href="#tests-logiciels" title="Lien vers cette rubrique">ïƒ</a></h1>
<section id="pre-requis">
<span id="test-logiciel-requirements"></span><h2>PrÃ©-requis<a class="headerlink" href="#pre-requis" title="Lien vers cette rubrique">ïƒ</a></h2>
<p>Pour cette Ã©tape, il vous faudraÂ :</p>
<ul class="simple">
<li><p>Un ordinateur (PC ou Ã©quivalent) avec un port USB libre. Cet ordinateur peut fonctionner sous Windows, MacOS ou Linux.</p></li>
<li><p>Un programmateur USB vers UART (par exemple, un programmateur <a class="reference internal" href="../../glossary/#term-FTDI"><span class="xref std std-term">FTDI</span></a>).</p></li>
<li><p>Un cÃ¢ble USB appropriÃ© pour connecter le programmateur Ã  lâ€™ordinateur de programmation.</p></li>
<li><p>Un cÃ¢ble dâ€™alimentation Ã©lectrique pour le routeur.</p></li>
</ul>
<section id="carte-usb-vers-uart">
<h3>Carte USB vers UART<a class="headerlink" href="#carte-usb-vers-uart" title="Lien vers cette rubrique">ïƒ</a></h3>
<div class="line-block">
<div class="line">Un programmateur USB vers UART est nÃ©cessaire pour tÃ©lÃ©charger le croquis (programme) sur le processeur.</div>
<div class="line">Ce programmateur est Ã©galement utilisÃ© pour surveiller les messages de dÃ©bogage envoyÃ©s par le processeur.</div>
</div>
<div class="line-block">
<div class="line">Selon le systÃ¨me dâ€™exploitation (Windows, MacOS ou Linux) de lâ€™ordinateur de programmation, il peut Ãªtre nÃ©cessaire dâ€™installer un pilote pour le programmateur.</div>
<div class="line">Les pilotes pour le programmateur <a class="reference internal" href="../../glossary/#term-FTDI"><span class="xref std std-term">FTDI</span></a> sont disponibles sur le site Web du fabricant.</div>
</div>
<div class="line-block">
<div class="line">Les pilotes disponibles sur le site <a class="reference external" href="https://www.ftdichip.com/" rel="noreferrer" target="_blank">FTDI</a> devraient convenir Ã  la plupart des cas dâ€™utilisation.</div>
<div class="line">Il conviendra de choisir les pilotes de type <strong>VCP</strong> (Virtual COM Port).</div>
</div>
</section>
<section id="logiciel-de-programmation">
<h3>Logiciel de programmation<a class="headerlink" href="#logiciel-de-programmation" title="Lien vers cette rubrique">ïƒ</a></h3>
<p>Pour programmer lâ€™Arduino, vous aurez besoin dâ€™un logiciel de programmation.</p>
<div class="line-block">
<div class="line">Le logiciel le plus convivial et le plus simple pour accomplir cette tÃ¢che est lâ€™ArduinoÂ IDE.</div>
<div class="line">Il est facile Ã  installer et Ã  utiliser, et il est spÃ©cialement conÃ§u pour programmer des cartes Arduino.</div>
</div>
<div class="line-block">
<div class="line">Cependant, vous pouvez Ã©galement utiliser VisualÂ StudioÂ Code avec lâ€™extension PlatformIO.</div>
<div class="line">Cette combinaison offre un environnement de dÃ©veloppement plus avancÃ© et de nombreuses fonctionnalitÃ©s supplÃ©mentaires pour les utilisateurs expÃ©rimentÃ©s.</div>
</div>
<p>Assurez-vous dâ€™installer lâ€™un de ces logiciels avant de continuer avec la programmation de votre carte.</p>
<div class="line-block">
<div class="line">Lâ€™<strong>Arduino IDE</strong> peut Ãªtre tÃ©lÃ©chargÃ© Ã  partir du site <a class="reference external" href="https://www.arduino.cc/en/software" rel="noreferrer" target="_blank">Arduino</a>.</div>
<div class="line">Pour Windows, veillez Ã  choisir la version <strong>Windows</strong> et non <span class="sphinxnotes-strike" style="text-decoration: line-through;">Windows App</span>.</div>
</div>
<div class="line-block">
<div class="line">Si vous Ãªtes totalement dÃ©butant dans le domaine de lâ€™Arduino, nous vous recommandons de consulter le tutoriel <a class="reference external" href="https://zestedesavoir.com/tutoriels/686/arduino-premiers-pas-en-informatique-embarquee/742_decouverte-de-larduino/" rel="noreferrer" target="_blank">DÃ©couverte de lâ€™Arduino</a> par exemple.</div>
<div class="line">Il y en a beaucoup dâ€™autres disponibles sur Internet.</div>
</div>
</section>
<section id="mise-en-place">
<h3>Mise en place<a class="headerlink" href="#mise-en-place" title="Lien vers cette rubrique">ïƒ</a></h3>
<div class="tip admonition">
<p class="admonition-title">Remarque</p>
<p>La carte <a class="reference internal" href="../../glossary/#term-FTDI"><span class="xref std std-term">FTDI</span></a> dispose dâ€™un commutateur ou dâ€™un cavalier pour choisir entre <strong>3,3Â V</strong> et <strong>5Â V</strong>.
Assurez-vous que le cavalier est correctement positionnÃ© pour la tension de fonctionnement de la carte-mÃ¨re.</p>
</div>
<div class="line-block">
<div class="line">Un programmateur USB vers UART doit Ãªtre connectÃ© au connecteur <a class="reference internal" href="../../glossary/#term-FTDI"><span class="xref std std-term">FTDI</span></a> du <a class="reference internal" href="../../glossary/#term-PCB"><span class="xref std std-term">PCB</span></a> comme indiquÃ© ci-dessous.</div>
<div class="line">Lâ€™autre extrÃ©mitÃ© du programmateur doit Ãªtre connectÃ©e Ã  lâ€™ordinateur de programmation (PC ou Ã©quivalent) via un cÃ¢ble USB appropriÃ©.</div>
</div>
<p>La broche Ã  une extrÃ©mitÃ© du connecteur Ã  6 voies du programmateur sera Ã©tiquetÃ©e <strong>Gnd</strong>. Cette broche doit correspondre au marquage <strong>0Â V</strong> sur le <a class="reference internal" href="../../glossary/#term-PCB"><span class="xref std std-term">PCB</span></a>.</p>
<div class="line-block">
<div class="line">Ici, nous utilisons le programmateur <a class="reference internal" href="../../glossary/#term-FTDI"><span class="xref std std-term">FTDI</span></a>. Notez quâ€™il doit Ãªtre montÃ© dans le sens inverse.</div>
<div class="line">La broche <strong>Gnd</strong> doit toujours Ãªtre la plus proche du bord de la carte.</div>
</div>
<div class="line-block">
<div class="line">Pour Ã©viter de tordre le connecteur du programmateur, vous pouvez fabriquer un simple cÃ¢ble dâ€™extension comme indiquÃ© ici.</div>
<div class="line">Seules quatre des lignes sont rÃ©ellement utilisÃ©es (donnÃ©es <strong>Tx</strong> &amp; <strong>Rx</strong>, masse et rÃ©initialisation).</div>
<div class="line">Aucune des lignes dâ€™alimentation Ã©lectrique nâ€™est utilisÃ©e par cette carte.</div>
</div>
<p>Le fil noir est destinÃ© Ã  la connexion <strong>GND</strong> (ou <strong>0Â V</strong>).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>La carte <a class="reference internal" href="../../glossary/#term-FTDI"><span class="xref std std-term">FTDI</span></a> ne peut pas alimenter la carte-mÃ¨re.</p>
<p>Le routeur doit toujours Ãªtre alimentÃ© par sa propre source dâ€™alimentation.</p>
</div>
</section>
</section>
<section id="installation-du-firmware">
<h2>Installation du Firmware<a class="headerlink" href="#installation-du-firmware" title="Lien vers cette rubrique">ïƒ</a></h2>
<p><strong>Ã‰tapes communes Ã  toutes les versions</strong> : <a class="reference internal" href="../../installation-logiciel/#installation-logiciel"><span class="std std-ref">Installation des Logiciels</span></a></p>
<section id="etape-1-telechargement-du-firmware">
<h3>Ã‰tape 1Â : TÃ©lÃ©chargement du Firmware<a class="headerlink" href="#etape-1-telechargement-du-firmware" title="Lien vers cette rubrique">ïƒ</a></h3>
<ol class="arabic simple">
<li><p>Ouvrir le navigateurÂ : <a class="reference external" href="https://github.com/FredM67/PVRouter-3-phase" rel="noreferrer" target="_blank">https://github.com/FredM67/PVRouter-3-phase</a></p></li>
<li><p>Cliquer sur le bouton vert <strong>Â«Â CodeÂ Â»</strong> â†’ <strong>Â«Â Download ZIPÂ Â»</strong></p></li>
<li><p>Enregistrer le fichier <cite>PVRouter-3-phase-main.zip</cite></p></li>
<li><p>Extraire le contenu dans un dossier de votre choix (exempleÂ : <cite>Documents/Arduino/</cite>)</p></li>
<li><p>Le firmware se trouve dansÂ : <cite>PVRouter-3-phase-main/Mk2_3phase_RFdatalog_temp/</cite></p></li>
</ol>
<section id="structure-du-firmware">
<h4>Structure du Firmware<a class="headerlink" href="#structure-du-firmware" title="Lien vers cette rubrique">ïƒ</a></h4>
<p>AprÃ¨s extraction, vous devriez avoirÂ :</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Mk2_3phase_RFdatalog_temp/
â”œâ”€â”€ Mk2_3phase_RFdatalog_temp.ino  (fichier principal)
â”œâ”€â”€ config.h                     (configuration utilisateur)
â”œâ”€â”€ calibration.h                (paramÃ¨tres dâ€™Ã©talonnage)
â”œâ”€â”€ dualtarif.h
â”œâ”€â”€ processing.cpp
â”œâ”€â”€ temperature.cpp
â”œâ”€â”€ utils_temp.h
â””â”€â”€ ... (autres fichiers)
</pre></div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Seuls deux fichiers doivent Ãªtre modifiÃ©s par lâ€™utilisateurÂ :</p>
<ul class="simple">
<li><p><strong>config.h</strong> â€” Configuration gÃ©nÃ©rale (pins, type dâ€™affichage, sorties)</p></li>
<li><p><strong>calibration.h</strong> â€” ParamÃ¨tres dâ€™Ã©talonnage (Ã  remplir aprÃ¨s lâ€™Ã©talonnage)</p></li>
</ul>
</div>
</section>
</section>
<section id="etape-2-configuration-du-firmware">
<h3>Ã‰tape 2Â : Configuration du Firmware<a class="headerlink" href="#etape-2-configuration-du-firmware" title="Lien vers cette rubrique">ïƒ</a></h3>
<section id="ouverture-du-projet">
<h4>Ouverture du Projet<a class="headerlink" href="#ouverture-du-projet" title="Lien vers cette rubrique">ïƒ</a></h4>
<ol class="arabic simple">
<li><p>Lancer Arduino IDE</p></li>
<li><p>MenuÂ : <strong>Fichier â†’ Ouvrir</strong></p></li>
<li><p>Naviguer vers le dossier du firmware</p></li>
<li><p>Ouvrir le fichier <cite>Mk2_3phase_RFdatalog_temp.ino</cite></p></li>
<li><p>Arduino IDE ouvre plusieurs onglets (câ€™est normal)</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Les autres fichiers (<cite>.cpp</cite>, <cite>.h</cite>) sâ€™affichent automatiquement dans des onglets sÃ©parÃ©s.</p>
</div>
</section>
<section id="configuration-dans-config-h">
<h4>Configuration dans <cite>config.h</cite><a class="headerlink" href="#configuration-dans-config-h" title="Lien vers cette rubrique">ïƒ</a></h4>
<p>Cliquer sur lâ€™onglet <strong>`config.h`</strong> pour le modifier.</p>
<section id="version-du-pcb">
<h5>Version du PCB<a class="headerlink" href="#version-du-pcb" title="Lien vers cette rubrique">ïƒ</a></h5>
<p>Selon la version de votre PCBÂ :</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Ancienne version de PCB (avant 2023)</span>
<span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">OLD_PCB</span><span class="p">{</span><span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="p">};</span>

<span class="c1">// Nouvelle version de PCB (2023+)</span>
<span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">OLD_PCB</span><span class="p">{</span><span class="w"> </span><span class="nb">false</span><span class="w"> </span><span class="p">};</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Astuce</p>
<p>Si vous avez reÃ§u votre kit aprÃ¨s 2Â 023, mettez <cite>false</cite>.</p>
</div>
</section>
<section id="format-de-sortie-serie">
<h5>Format de Sortie SÃ©rie<a class="headerlink" href="#format-de-sortie-serie" title="Lien vers cette rubrique">ïƒ</a></h5>
<p>Pour dÃ©buter, laisser le mode lisible par un humainÂ :</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">SerialOutputType</span><span class="w"> </span><span class="n">SERIAL_OUTPUT_TYPE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SerialOutputType</span><span class="o">::</span><span class="n">HumanReadable</span><span class="p">;</span>
</pre></div>
</div>
<p>Options disponiblesÂ :</p>
<ul class="simple">
<li><p><cite>HumanReadable</cite>Â : Affichage facile Ã  lire (recommandÃ© pour dÃ©buter)</p></li>
<li><p><cite>IoT</cite>Â : Format compact pour IoT</p></li>
<li><p><cite>JSON</cite>Â : Format JSON pour intÃ©gration domotique</p></li>
</ul>
</section>
<section id="configuration-des-sorties-triac">
<h5>Configuration des Sorties Triac<a class="headerlink" href="#configuration-des-sorties-triac" title="Lien vers cette rubrique">ïƒ</a></h5>
<p>DÃ©finir le nombre de sorties et leurs brochesÂ :</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// ExempleÂ : 2 sorties triac</span>
<span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">NO_OF_DUMPLOADS</span><span class="p">{</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">};</span>

<span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">IoPinMapping</span><span class="w"> </span><span class="n">physicalPin_dump_load</span><span class="p">[</span><span class="n">NO_OF_DUMPLOADS</span><span class="p">]{</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="n">DivertorConfig</span><span class="p">(</span><span class="n">NORMAL</span><span class="p">)</span><span class="w"> </span><span class="p">},</span><span class="w">    </span><span class="c1">// Sortie 1 sur broche D5</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="n">DivertorConfig</span><span class="p">(</span><span class="n">NORMAL</span><span class="p">)</span><span class="w"> </span><span class="p">},</span><span class="w">    </span><span class="c1">// Sortie 2 sur broche D4</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
<section id="ordre-de-demarrage">
<h5>Ordre de DÃ©marrage<a class="headerlink" href="#ordre-de-demarrage" title="Lien vers cette rubrique">ïƒ</a></h5>
<p>DÃ©finir la prioritÃ© des chargesÂ :</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">dumpLoad_startup_sequence</span><span class="p">[</span><span class="n">NO_OF_DUMPLOADS</span><span class="p">]{</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">};</span>
</pre></div>
</div>
<p>SignificationÂ : DÃ©marrer dâ€™abord la sortie 0, puis la sortie 1.</p>
</section>
<section id="sondes-de-temperature-optionnel">
<h5>Sondes de TempÃ©rature (Optionnel)<a class="headerlink" href="#sondes-de-temperature-optionnel" title="Lien vers cette rubrique">ïƒ</a></h5>
<p>Si vous utilisez des sondes DS18B20, dÃ©commenter la ligneÂ :</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#define TEMP_ENABLED</span>
</pre></div>
</div>
<p>Et configurer les adresses des sondesÂ :</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">DeviceAddress</span><span class="w"> </span><span class="n">sensor_list</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<span class="p">{</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="mh">0x28</span><span class="p">,</span><span class="w"> </span><span class="mh">0xAA</span><span class="p">,</span><span class="w"> </span><span class="mh">0xBB</span><span class="p">,</span><span class="w"> </span><span class="mh">0xCC</span><span class="p">,</span><span class="w"> </span><span class="mh">0xDD</span><span class="p">,</span><span class="w"> </span><span class="mh">0xEE</span><span class="p">,</span><span class="w"> </span><span class="mh">0xFF</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="w"> </span><span class="p">},</span><span class="w">  </span><span class="c1">// Sonde 1</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="mh">0x28</span><span class="p">,</span><span class="w"> </span><span class="mh">0xAA</span><span class="p">,</span><span class="w"> </span><span class="mh">0xBB</span><span class="p">,</span><span class="w"> </span><span class="mh">0xCC</span><span class="p">,</span><span class="w"> </span><span class="mh">0xDD</span><span class="p">,</span><span class="w"> </span><span class="mh">0xEE</span><span class="p">,</span><span class="w"> </span><span class="mh">0xFF</span><span class="p">,</span><span class="w"> </span><span class="mh">0x02</span><span class="w"> </span><span class="p">},</span><span class="w">  </span><span class="c1">// Sonde 2</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="mh">0x28</span><span class="p">,</span><span class="w"> </span><span class="mh">0xAA</span><span class="p">,</span><span class="w"> </span><span class="mh">0xBB</span><span class="p">,</span><span class="w"> </span><span class="mh">0xCC</span><span class="p">,</span><span class="w"> </span><span class="mh">0xDD</span><span class="p">,</span><span class="w"> </span><span class="mh">0xEE</span><span class="p">,</span><span class="w"> </span><span class="mh">0xFF</span><span class="p">,</span><span class="w"> </span><span class="mh">0x03</span><span class="w"> </span><span class="p">},</span><span class="w">  </span><span class="c1">// Sonde 3</span>
<span class="p">};</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Les adresses des sondes seront trouvÃ©es lors du premier lancement (voir Moniteur SÃ©rie).</p>
</div>
</section>
</section>
<section id="configuration-dans-calibration-h">
<h4>Configuration dans <cite>calibration.h</cite><a class="headerlink" href="#configuration-dans-calibration-h" title="Lien vers cette rubrique">ïƒ</a></h4>
<p>Ce fichier contient les paramÃ¨tres dâ€™Ã©talonnage.</p>
<div class="admonition warning">
<p class="admonition-title">Avertissement</p>
<p>Ne modifiez <strong>PAS</strong> ce fichier maintenant â€” les valeurs seront dÃ©terminÃ©es lors de lâ€™Ã©talonnage
(voir chapitre <a class="reference internal" href="../etalonnage-tri/#etalonnage-tri"><span class="std std-ref">Ã‰talonnage</span></a> ou <a class="reference internal" href="../etalonnage-tri/#etalonnage-tri"><span class="std std-ref">Ã‰talonnage</span></a>).</p>
</div>
<p>Les paramÃ¨tres par dÃ©faut permettent de tester le routeur.</p>
</section>
</section>
<section id="etape-3-connexion-et-programmation">
<h3>Ã‰tape 3Â : Connexion et Programmation<a class="headerlink" href="#etape-3-connexion-et-programmation" title="Lien vers cette rubrique">ïƒ</a></h3>
<section id="preparation">
<h4>PrÃ©paration<a class="headerlink" href="#preparation" title="Lien vers cette rubrique">ïƒ</a></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Lâ€™adaptateur FTDI ne peut <strong>PAS</strong> alimenter le routeur seulÂ !</p>
<p>Le routeur doit Ãªtre alimentÃ© par sa propre alimentation triphasÃ©e.</p>
</div>
</section>
<section id="connexion-du-routeur">
<h4>Connexion du Routeur<a class="headerlink" href="#connexion-du-routeur" title="Lien vers cette rubrique">ïƒ</a></h4>
<p>Le PCB dispose dâ€™un connecteur 6 broches pour lâ€™adaptateur FTDI. Si votre adaptateur a un connecteur compatible, branchez-le directement â€” câ€™est la mÃ©thode la plus simple.</p>
<p>Si vous utilisez des fils individuels, suivez les instructions ci-dessous.</p>
<ol class="arabic">
<li><p>âš ï¸ <strong>Couper lâ€™alimentation secteur</strong> du routeur (disjoncteur)</p></li>
<li><p>Brancher lâ€™adaptateur FTDI sur le routeurÂ :</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Broche FTDI</p></th>
<th class="head"><p>Broche PCB</p></th>
<th class="head"><p>Couleur cÃ¢ble (FTDI)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>GND</p></td>
<td><p>0Â V (ou GND)</p></td>
<td><p>Noir</p></td>
</tr>
<tr class="row-odd"><td><p>TX (Transmit)</p></td>
<td><p>RX (Receive)</p></td>
<td><p>Vert ou Orange</p></td>
</tr>
<tr class="row-even"><td><p>RX (Receive)</p></td>
<td><p>TX (Transmit)</p></td>
<td><p>Blanc ou Jaune</p></td>
</tr>
<tr class="row-odd"><td><p>VCC</p></td>
<td><p><strong>NE PAS CONNECTER</strong></p></td>
<td><p>Rouge (laisser libre)</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>âš ï¸ <strong>CÃ¢blage manuel uniquement</strong> : NE PAS connecter le fil VCC (rouge) de lâ€™adaptateur FTDI au routeurÂ !</p>
<p>Cela peut endommager lâ€™adaptateur FTDI ou le routeur.</p>
</div>
<ol class="arabic simple">
<li><p>VÃ©rifier le cavalier ou switch de lâ€™adaptateur FTDIÂ :</p>
<ul class="simple">
<li><p>Position <strong>3.3Â V</strong> si routeur en 3.3Â V</p></li>
<li><p>Position <strong>5Â V</strong> si routeur en 5Â V</p></li>
</ul>
</li>
<li><p>Connecter lâ€™adaptateur FTDI Ã  lâ€™ordinateur (port USB)</p></li>
<li><p><strong>Mettre le routeur sous tension</strong> (rÃ©enclencher le disjoncteur)</p></li>
</ol>
</section>
<section id="configuration-arduino-ide">
<h4>Configuration Arduino IDE<a class="headerlink" href="#configuration-arduino-ide" title="Lien vers cette rubrique">ïƒ</a></h4>
<ol class="arabic simple">
<li><p>MenuÂ : <strong>Outils â†’ Type de carte â†’ Arduino AVR Boards â†’ Arduino Uno</strong></p></li>
<li><p>MenuÂ : <strong>Outils â†’ Port â†’ COMx</strong> (Windows) ou <cite>/dev/tty.usbserial-xxx</cite> (Mac/Linux)</p>
<ul class="simple">
<li><p>Choisir le port correspondant Ã  lâ€™adaptateur FTDI</p></li>
<li><p>Si plusieurs portsÂ : essayer chacun jusquâ€™Ã  ce que Ã§a fonctionne</p></li>
</ul>
</li>
<li><p>MenuÂ : <strong>Outils â†’ Programmateur â†’ AVRISP mkII</strong> (ou laisser par dÃ©faut)</p></li>
</ol>
</section>
<section id="compilation-et-televersement">
<h4>Compilation et TÃ©lÃ©versement<a class="headerlink" href="#compilation-et-televersement" title="Lien vers cette rubrique">ïƒ</a></h4>
<div class="admonition-checklist-avant-televersement admonition">
<p class="admonition-title">Checklist avant tÃ©lÃ©versement</p>
<ul class="simple">
<li><p>[ ] Modifications sauvegardÃ©es dans <cite>config.h</cite></p></li>
<li><p>[ ] Routeur alimentÃ© (230Â V)</p></li>
<li><p>[ ] Adaptateur FTDI connectÃ© (USB + PCB)</p></li>
<li><p>[ ] Bon port COM sÃ©lectionnÃ©</p></li>
<li><p>[ ] Type de carte = Arduino Uno</p></li>
</ul>
</div>
<ol class="arabic simple">
<li><p>Cliquer sur le bouton <strong>Â«Â VÃ©rifierÂ Â»</strong> (âœ“) pour compiler</p>
<ul class="simple">
<li><p>Attendre la compilation (1-2Â minutes la premiÃ¨re fois)</p></li>
<li><p>VÃ©rifier quâ€™il nâ€™y a <strong>aucune erreur</strong></p></li>
</ul>
</li>
<li><p>Si la compilation rÃ©ussit, cliquer sur <strong>Â«Â TÃ©lÃ©verserÂ Â»</strong> (â†’)</p>
<ul class="simple">
<li><p>La LED <strong>TX</strong> sur lâ€™adaptateur FTDI clignote</p></li>
<li><p>La LED <strong>RX</strong> sur le routeur clignote</p></li>
<li><p>Attendre le message <strong>Â«Â TÃ©lÃ©versement terminÃ©Â Â»</strong></p></li>
</ul>
</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Astuce</p>
<p>Si la compilation Ã©choue avec des erreurs sur <cite>std::array</cite> ou <cite>constexpr</cite>,
câ€™est que le fichier <cite>platform.txt</cite> nâ€™a pas Ã©tÃ© correctement modifiÃ© (voir <a class="reference internal" href="../../installation-logiciel/#arduino-cpp17-config"><span class="std std-ref">Configuration Arduino IDE pour C++17</span></a>).</p>
</div>
</section>
<section id="resolution-des-problemes">
<h4>RÃ©solution des ProblÃ¨mes<a class="headerlink" href="#resolution-des-problemes" title="Lien vers cette rubrique">ïƒ</a></h4>
<section id="erreur-avrdude-stk500-recv-programmer-is-not-responding">
<h5>ErreurÂ : <cite>avrdude: stk500_recv(): programmer is not responding</cite><a class="headerlink" href="#erreur-avrdude-stk500-recv-programmer-is-not-responding" title="Lien vers cette rubrique">ïƒ</a></h5>
<p><strong>Causes possiblesÂ :</strong></p>
<ol class="arabic simple">
<li><p>Mauvais port COM sÃ©lectionnÃ© â†’ Essayer un autre port</p></li>
<li><p>Routeur non alimentÃ© â†’ VÃ©rifier lâ€™alimentation 230Â V</p></li>
<li><p>CÃ¢blage FTDI incorrect â†’ VÃ©rifier TX â†” RX inversÃ©s</p></li>
<li><p>ATmega328 mal insÃ©rÃ© â†’ VÃ©rifier lâ€™orientation et lâ€™insertion complÃ¨te</p></li>
</ol>
</section>
<section id="erreur-error-constexpr-does-not-name-a-type">
<h5>ErreurÂ : <cite>error: â€™constexprâ€™ does not name a type</cite><a class="headerlink" href="#erreur-error-constexpr-does-not-name-a-type" title="Lien vers cette rubrique">ïƒ</a></h5>
<p>Le fichier <cite>platform.txt</cite> nâ€™a pas Ã©tÃ© modifiÃ© correctement.</p>
<p><strong>SolutionÂ :</strong> Reprendre <a class="reference internal" href="../../installation-logiciel/#arduino-cpp17-config"><span class="std std-ref">Configuration Arduino IDE pour C++17</span></a>.</p>
</section>
<section id="port-com-napparait-pas">
<h5>Port COM nâ€™apparaÃ®t pas<a class="headerlink" href="#port-com-napparait-pas" title="Lien vers cette rubrique">ïƒ</a></h5>
<ol class="arabic simple">
<li><p>VÃ©rifier que les pilotes FTDI sont installÃ©s (<a class="reference internal" href="../../installation-logiciel/#install-etape1-ftdi"><span class="std std-ref">Installation Pilotes FTDI</span></a>)</p></li>
<li><p>DÃ©brancher/rebrancher lâ€™adaptateur FTDI</p></li>
<li><p>RedÃ©marrer lâ€™ordinateur</p></li>
</ol>
</section>
</section>
</section>
<section id="etape-4-verification-du-fonctionnement">
<h3>Ã‰tape 4Â : VÃ©rification du Fonctionnement<a class="headerlink" href="#etape-4-verification-du-fonctionnement" title="Lien vers cette rubrique">ïƒ</a></h3>
<section id="ouverture-du-moniteur-serie">
<h4>Ouverture du Moniteur SÃ©rie<a class="headerlink" href="#ouverture-du-moniteur-serie" title="Lien vers cette rubrique">ïƒ</a></h4>
<ol class="arabic simple">
<li><p>MenuÂ : <strong>Outils â†’ Moniteur sÃ©rie</strong></p></li>
<li><p>Configurer en bas Ã  droiteÂ :</p>
<ul class="simple">
<li><p><strong>Vitesse (baud rate)</strong>Â : <cite>9600</cite></p></li>
<li><p><strong>Fin de ligne</strong>Â : <cite>Retour chariot et Nouvelle ligne</cite> (NL &amp; CR)</p></li>
</ul>
</li>
</ol>
</section>
<section id="messages-attendus">
<h4>Messages Attendus<a class="headerlink" href="#messages-attendus" title="Lien vers cette rubrique">ïƒ</a></h4>
<p>Si tout fonctionne, vous devriez voir des messages sâ€™afficherÂ :</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Mk2PVRouter v3.x
Initialisation...
CT1: 0Â W
CT2: 0Â W  (si triphasÃ©)
CT3: 0Â W  (si triphasÃ©)
Grid: 230Â V
Load 1: OFF
Load 2: OFF
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Les valeurs exactes dÃ©pendent de votre installation et de lâ€™Ã©talonnage.</p>
</div>
</section>
<section id="si-aucun-message-napparait">
<h4>Si Aucun Message nâ€™ApparaÃ®t<a class="headerlink" href="#si-aucun-message-napparait" title="Lien vers cette rubrique">ïƒ</a></h4>
<ol class="arabic simple">
<li><p>VÃ©rifier que le bon baud rate est sÃ©lectionnÃ© (9600 bauds)</p></li>
<li><p>VÃ©rifier le cÃ¢blage FTDI (TX â†” RX)</p></li>
<li><p>VÃ©rifier que le routeur est alimentÃ©</p></li>
<li><p>VÃ©rifier lâ€™oscillateur 16Â MHz et les condensateurs C6/C7</p></li>
</ol>
</section>
<section id="adresses-des-sondes-de-temperature">
<h4>Adresses des Sondes de TempÃ©rature<a class="headerlink" href="#adresses-des-sondes-de-temperature" title="Lien vers cette rubrique">ïƒ</a></h4>
<p>Si vous avez activÃ© <cite>TEMP_ENABLED</cite>, le moniteur sÃ©rie affichera les adresses dÃ©tectÃ©esÂ :</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Temperature sensor 0 address: 28 AA BB CC DD EE FF 01
Temperature sensor 1 address: 28 AA BB CC DD EE FF 02
</pre></div>
</div>
<p>Copier ces adresses dans <cite>config.h</cite> (section sondes de tempÃ©rature).</p>
</section>
</section>
<section id="prochaines-etapes">
<h3>Prochaines Ã‰tapes<a class="headerlink" href="#prochaines-etapes" title="Lien vers cette rubrique">ïƒ</a></h3>
<p>âœ… Le firmware est maintenant installÃ© et fonctionnelÂ !</p>
<p><strong>Prochaines Ã©tapesÂ :</strong></p>
<ol class="arabic">
<li><p><strong>Ã‰talonnage</strong>Â : Voir chapitre <a class="reference internal" href="../etalonnage-tri/#etalonnage-tri"><span class="std std-ref">Ã‰talonnage</span></a> ou <a class="reference internal" href="../etalonnage-tri/#etalonnage-tri"><span class="std std-ref">Ã‰talonnage</span></a></p>
<p>Lâ€™Ã©talonnage est <strong>OBLIGATOIRE</strong> pour que le routeur fonctionne correctement.</p>
</li>
<li><p><strong>Installation finale</strong>Â : Connexion au rÃ©seau Ã©lectrique (faire appel Ã  un Ã©lectricien qualifiÃ©)</p></li>
<li><p><strong>Configuration avancÃ©e</strong>Â : Relais, sondes de tempÃ©rature, double tarif, etc.</p></li>
</ol>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>Ne pas connecter le routeur au rÃ©seau Ã©lectrique domestique avant dâ€™avoirÂ :</p>
<ul class="simple">
<li><p>[ ] VÃ©rifiÃ© toutes les soudures (pas de pont, pas de soudure froide)</p></li>
<li><p>[ ] Lu le chapitre de sÃ©curitÃ©</p></li>
<li><p>[ ] Fait appel Ã  un Ã©lectricien qualifiÃ© (fortement recommandÃ©)</p></li>
</ul>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p><strong>FONCTIONNALITÃ‰</strong>Â : Lâ€™Ã©talonnage doit Ãªtre effectuÃ© aprÃ¨s lâ€™installation Ã©lectrique pour que le routeur mesure correctement et fonctionne de maniÃ¨re optimale. Le routeur peut Ãªtre connectÃ© sans Ã©talonnage (pas de danger), mais ne fonctionnera pas correctement.</p>
</div>
</section>
<section id="test-de-la-partie-mesures">
<h3>Test de la partie <em>mesures</em><a class="headerlink" href="#test-de-la-partie-mesures" title="Lien vers cette rubrique">ïƒ</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Ã€ partir de maintenant, une alimentation triphasÃ©e devra Ãªtre fournie Ã  la carte-mÃ¨re.</p>
</div>
<p>Chaque transformateur a deux sortiesÂ : lâ€™une pour lâ€™alimentation CC, lâ€™autre pour le capteur de tension CA qui devrait dÃ©jÃ  fonctionner.
Cela peut Ãªtre vÃ©rifiÃ© en exÃ©cutant un programme (croquis) qui affiche les mesures analogiques prises par le processeur Atmel (<strong>IC1</strong>).</p>
<p>Le programme, qui se trouve Ã©galement sur la page TÃ©lÃ©chargements, estÂ : <em>RawSamplesTool_6chan.ino</em></p>
<p>AprÃ¨s avoir tÃ©lÃ©chargÃ© ce croquis sur le processeur via lâ€™ArduinoÂ IDE, la fenÃªtre sÃ©rie (icÃ´ne en forme de loupe) doit Ãªtre ouverte.
AprÃ¨s avoir terminÃ© chaque exÃ©cution, le programme peut Ãªtre redÃ©marrÃ© Ã  partir du clavier en saisissant le caractÃ¨re Â«Â <strong>g</strong>Â Â», suivi de <em>EntrÃ©e</em>.</p>
<p>Le programme <em>RawSamplesTool_6chan</em> affiche les Ã©chantillons des trois tensions alternatives et de courant pour un ou plusieurs cycles secteur complets.
Si un courant important est mesurÃ© ainsi que la tension, les rÃ©sultats affichÃ©s sembleront plus intÃ©ressants.</p>
<p>Voici quelques rÃ©sultats capturÃ©s lors de la mesure du courant consommÃ© par une charge de 3Â kW avec le <a class="reference internal" href="../../glossary/#term-CT"><span class="xref std std-term">CT</span></a> branchÃ© sur <strong>CT2</strong>.
Lorsque le <a class="reference internal" href="../../glossary/#term-CT"><span class="xref std std-term">CT</span></a> a Ã©tÃ© dÃ©placÃ© vers le port <strong>CT1</strong>, la sortie rÃ©sultante semblait presque identique, mais avec les caractÃ¨res Â«Â <strong>1</strong>Â Â» et Â«Â <strong>2</strong>Â Â» inversÃ©s.</p>
<p>RSResults_V_and_I2.txt</p>
<p>Si aucun signal nâ€™est disponible sur les ports <strong>CT1-CT3</strong>, les formes dâ€™onde de ces canaux seront toutes deux des lignes droites.
Seuls les signaux de tension afficheront un aspect sinusoÃ¯dal.
Pour vÃ©rifier le fonctionnement des ports <strong>CT1-CT3</strong> pendant que le <a class="reference internal" href="../../glossary/#term-PCB"><span class="xref std std-term">PCB</span></a> est testÃ© sur le banc, un cÃ¢blage adaptÃ© sera nÃ©cessaire.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Pied de page">
        <a href="../assemblage-tri/" class="btn btn-neutral float-left" title="Assemblage" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> PrÃ©cÃ©dent</a>
        <a href="../etalonnage-tri/" class="btn btn-neutral float-right" title="Ã‰talonnage" accesskey="n" rel="next">Suivant <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Droits d'auteur 2025, ENERGIE ROUTER &amp; F. Metrich (aka github:FredM67).
      <span class="lastupdated">Mis Ã  jour le 02 dÃ©cembre 2025.
      </span></p>
  </div>

  CompilÃ© avec <a href="https://www.sphinx-doc.org/">Sphinx</a> en utilisant un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">thÃ¨me</a>
    fourni par <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  

<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Documentation</span>
      v (stable)
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="/Mk2PVRouter/">latest</a></dd>
        
          <dd><a href="/Mk2PVRouter/branch/legacy/">legacy (mono/tri)</a></dd>
        
      </dl>
      <dl>
        <dt>TÃ©lÃ©chargements</dt>
        
          <dd><a href="../_static/Manuel_1.pdf">PDF1</a></dd>
        
          <dd><a href="../_static/Manuel_2.pdf">PDF2</a></dd>
        
      </dl>
      <dl>
        <dt>On Github</dt>
          <dd><a href="https://github.com/FredM67/Mk2PVRouter/blob/main/content/tri/test-logiciel-tri.rst"> View</a></dd>
          <dd><a href="https://github.com/FredM67/Mk2PVRouter/edit/main/content/tri/test-logiciel-tri.rst"> Edit</a></dd>
      </dl>
      <dl>
        <dt>Recherche</dt>
          <dd>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search/" method="get">
    <input type="text" name="q" placeholder="Rechercher docs" aria-label="Rechercher docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div></dd>
      </dl>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>